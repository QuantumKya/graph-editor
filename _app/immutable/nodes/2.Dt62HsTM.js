import"../chunks/CWj6FrbW.js";import"../chunks/CJ-xflsy.js";import{d as st,o as at}from"../chunks/C14v2Pcp.js";import{h as z,V as pt,a0 as dt,N as $,O as tt,Q as yt,R as vt,av as gt,aw as mt,ax as xt,ay as _t,az as bt,aA as Mt,u as At,q as St,D as ut,as as T,ak as q,F as V,J as P,L as x,al as N,A as p,K as O,a as F,I as ct,G as W}from"../chunks/DghrFbep.js";import{b as L,i as ht}from"../chunks/_mtKgGk-.js";import{b as J}from"../chunks/kCSUiP69.js";function wt(i){z&&pt(i)!==null&&dt(i)}let et=!1;function lt(){et||(et=!0,document.addEventListener("reset",i=>{Promise.resolve().then(()=>{var r;if(!i.defaultPrevented)for(const e of i.target.elements)(r=e.__on_r)==null||r.call(e)})},{capture:!0}))}function Yt(i){var r=yt,e=vt;$(null),tt(null);try{return i()}finally{$(r),tt(e)}}function Xt(i,r,e,s=e){i.addEventListener(r,()=>Yt(e));const n=i.__on_r;n?i.__on_r=()=>{n(),s(!0)}:i.__on_r=()=>s(!0),lt()}function it(i,r=!1){var e=r?" !important;":";",s="";for(var n in i){var u=i[n];u!=null&&u!==""&&(s+=" "+n+": "+u+e)}return s}function Et(i,r){if(r){var e="",s,n;return Array.isArray(r)?(s=r[0],n=r[1]):s=r,s&&(e+=it(s)),n&&(e+=it(n,!0)),e=e.trim(),e===""?null:e}return String(i)}function R(i,r={},e,s){for(var n in e){var u=e[n];r[n]!==u&&(e[n]==null?i.style.removeProperty(n):i.style.setProperty(n,u,s))}}function Nt(i,r,e,s){var n=i.__style;if(z||n!==r){var u=Et(r,s);(!z||u!==i.getAttribute("style"))&&(u==null?i.removeAttribute("style"):i.style.cssText=u),i.__style=r}else s&&(Array.isArray(s)?(R(i,e==null?void 0:e[0],s[0]),R(i,e==null?void 0:e[1],s[1],"important")):R(i,e,s));return s}const zt=Symbol("is custom element"),Dt=Symbol("is html");function kt(i){if(z){var r=!1,e=()=>{if(!r){if(r=!0,i.hasAttribute("value")){var s=i.value;D(i,"value",null),i.value=s}if(i.hasAttribute("checked")){var n=i.checked;D(i,"checked",null),i.checked=n}}};i.__on_r=e,_t(e),lt()}}function D(i,r,e,s){var n=Tt(i);z&&(n[r]=i.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&i.nodeName==="LINK")||n[r]!==(n[r]=e)&&(r==="loading"&&(i[bt]=e),e==null?i.removeAttribute(r):typeof e!="string"&&It(i).includes(r)?i[r]=e:i.setAttribute(r,e))}function Tt(i){return i.__attributes??(i.__attributes={[zt]:i.nodeName.includes("-"),[Dt]:i.namespaceURI===gt})}var rt=new Map;function It(i){var r=rt.get(i.nodeName);if(r)return r;rt.set(i.nodeName,r=[]);for(var e,s=i,n=Element.prototype;n!==s;){e=xt(s);for(var u in e)e[u].set&&r.push(u);s=mt(s)}return r}function ot(i,r,e=r){var s=Mt();Xt(i,"input",n=>{var u=n?i.defaultValue:i.value;if(u=G(i)?H(u):u,e(u),s&&u!==(u=r())){var y=i.selectionStart,t=i.selectionEnd;i.value=u??"",t!==null&&(i.selectionStart=y,i.selectionEnd=Math.min(t,i.value.length))}}),(z&&i.defaultValue!==i.value||At(r)==null&&i.value)&&e(G(i)?H(i.value):i.value),St(()=>{var n=r();G(i)&&n===H(i.value)||i.type==="date"&&!n&&!i.value||n!==i.value&&(i.value=n??"")})}function G(i){var r=i.type;return r==="number"||r==="range"}function H(i){return i===""?null:+i}const jt=[{id:0,name:"Addition",description:"",image:"/landscape-placeholder.svg",position:[100,100]},{id:1,name:"Subtraction",description:"",image:"/landscape-placeholder.svg",position:[300,150]},{id:2,name:"Multiplication",description:"",image:"/landscape-placeholder.svg",position:[200,300]},{id:3,name:"Division",description:"",image:"/landscape-placeholder.svg",position:[300,450]}],qt=[{from:0,to:1},{from:0,to:2},{from:2,to:3}],Q={nodes:jt,links:qt};var Pt=V('<img alt="Uploaded Icon" id="display-image" class="svelte-gj9au2"/>'),Ot=V('<img alt="Uploaded Icon" id="display-image" class="svelte-gj9au2"/>'),Ft=V('<div id="panel" class="svelte-gj9au2"><input type="text" class="text-input svelte-gj9au2" placeholder="Node Title"/> <button id="image" class="svelte-gj9au2">Upload Image</button> <input type="file" accept="image/*"/> <!> <textarea rows="8" maxlength="400" class="text-input svelte-gj9au2" id="desc" placeholder="Node Description"></textarea> <button id="save" class="svelte-gj9au2">Save</button> <button id="exit" class="svelte-gj9au2">Exit</button></div>');function Lt(i,r){ut(r,!0);const s=Q.nodes[r.node_id];let n=T(q(s.name)),u=T(q(s.description)),y=T(q(s.image)),t,o,d,g=!1,_=!1;at(()=>{o.value=s.name,d.value=s.description});const M=()=>{g=!0};var m=Ft(),b=P(m);kt(b),b.__change=M,L(b,c=>o=c,()=>o);var k=x(b,2);k.__click=c=>{t.click()};var X=x(k,2);X.__change=c=>{const v=c.target;if(!v.files||v.files.length===0)return;const U=v.files[0],w=new FileReader;w.onload=()=>{typeof w.result=="string"&&N(y,w.result,!0)},w.readAsDataURL(U),M()},Nt(X,"",{},{display:"none"}),L(X,c=>t=c,()=>t);var I=x(X,2);{var B=c=>{var v=Pt();W(()=>D(v,"src",p(y))),F(c,v)},C=c=>{var v=Ot();W(()=>D(v,"src",`${J??""}/landscape-placeholder.svg`)),F(c,v)};ht(I,c=>{p(y)!=""?c(B):c(C,!1)})}var A=x(I,2);wt(A),A.__change=M,L(A,c=>d=c,()=>d);var E=x(A,2);E.__click=()=>{_=r.saveNode(r.node_id,p(n),p(u),p(y))};var S=x(E,2);S.__click=()=>r.exitNode(_,g),O(m),ot(b,()=>p(n),c=>N(n,c)),ot(A,()=>p(u),c=>N(u,c)),F(i,m),ct()}st(["change","click"]);function Vt(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var K={exports:{}},nt;function Bt(){return nt||(nt=1,function(i,r){i.exports=e;function e(t,o){if(!(this instanceof e))return new e(t,o);this.x=t||0,this.y=o||0}e.fromArray=function(t){return new e(t[0]||0,t[1]||0)},e.fromObject=function(t){return new e(t.x||0,t.y||0)},e.prototype.addX=function(t){return this.x+=t.x,this},e.prototype.addY=function(t){return this.y+=t.y,this},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},e.prototype.addScalarX=function(t){return this.x+=t,this},e.prototype.addScalarY=function(t){return this.y+=t,this},e.prototype.subtractX=function(t){return this.x-=t.x,this},e.prototype.subtractY=function(t){return this.y-=t.y,this},e.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.subtractScalar=function(t){return this.x-=t,this.y-=t,this},e.prototype.subtractScalarX=function(t){return this.x-=t,this},e.prototype.subtractScalarY=function(t){return this.y-=t,this},e.prototype.divideX=function(t){return this.x/=t.x,this},e.prototype.divideY=function(t){return this.y/=t.y,this},e.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},e.prototype.divideScalar=function(t){return t!==0?(this.x/=t,this.y/=t):(this.x=0,this.y=0),this},e.prototype.divideScalarX=function(t){return t!==0?this.x/=t:this.x=0,this},e.prototype.divideScalarY=function(t){return t!==0?this.y/=t:this.y=0,this},e.prototype.invertX=function(){return this.x*=-1,this},e.prototype.invertY=function(){return this.y*=-1,this},e.prototype.invert=function(){return this.invertX(),this.invertY(),this},e.prototype.multiplyX=function(t){return this.x*=t.x,this},e.prototype.multiplyY=function(t){return this.y*=t.y,this},e.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},e.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},e.prototype.multiplyScalarX=function(t){return this.x*=t,this},e.prototype.multiplyScalarY=function(t){return this.y*=t,this},e.prototype.normalize=function(){var t=this.length();return t===0?(this.x=1,this.y=0):this.divide(e(t,t)),this},e.prototype.norm=e.prototype.normalize,e.prototype.limit=function(t,o){return Math.abs(this.x)>t&&(this.x*=o),Math.abs(this.y)>t&&(this.y*=o),this},e.prototype.randomize=function(t,o){return this.randomizeX(t,o),this.randomizeY(t,o),this},e.prototype.randomizeX=function(t,o){var d=Math.min(t.x,o.x),g=Math.max(t.x,o.x);return this.x=n(d,g),this},e.prototype.randomizeY=function(t,o){var d=Math.min(t.y,o.y),g=Math.max(t.y,o.y);return this.y=n(d,g),this},e.prototype.randomizeAny=function(t,o){return Math.round(Math.random())?this.randomizeX(t,o):this.randomizeY(t,o),this},e.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},e.prototype.toFixed=function(t){return typeof t>"u"&&(t=8),this.x=this.x.toFixed(t),this.y=this.y.toFixed(t),this},e.prototype.mixX=function(t,o){return typeof o>"u"&&(o=.5),this.x=(1-o)*this.x+o*t.x,this},e.prototype.mixY=function(t,o){return typeof o>"u"&&(o=.5),this.y=(1-o)*this.y+o*t.y,this},e.prototype.mix=function(t,o){return this.mixX(t,o),this.mixY(t,o),this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyX=function(t){return this.x=t.x,this},e.prototype.copyY=function(t){return this.y=t.y,this},e.prototype.copy=function(t){return this.copyX(t),this.copyY(t),this},e.prototype.zero=function(){return this.x=this.y=0,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.cross=function(t){return this.x*t.y-this.y*t.x},e.prototype.projectOnto=function(t){var o=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=o*t.x,this.y=o*t.y,this},e.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},e.prototype.horizontalAngleDeg=function(){return u(this.horizontalAngle())},e.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},e.prototype.verticalAngleDeg=function(){return u(this.verticalAngle())},e.prototype.angle=e.prototype.horizontalAngle,e.prototype.angleDeg=e.prototype.horizontalAngleDeg,e.prototype.direction=e.prototype.horizontalAngle,e.prototype.rotate=function(t){var o=this.x*Math.cos(t)-this.y*Math.sin(t),d=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=o,this.y=d,this},e.prototype.rotateDeg=function(t){return t=y(t),this.rotate(t)},e.prototype.rotateTo=function(t){return this.rotate(t-this.angle())},e.prototype.rotateToDeg=function(t){return t=y(t),this.rotateTo(t)},e.prototype.rotateBy=function(t){var o=this.angle()+t;return this.rotate(o)},e.prototype.rotateByDeg=function(t){return t=y(t),this.rotateBy(t)},e.prototype.distanceX=function(t){return this.x-t.x},e.prototype.absDistanceX=function(t){return Math.abs(this.distanceX(t))},e.prototype.distanceY=function(t){return this.y-t.y},e.prototype.absDistanceY=function(t){return Math.abs(this.distanceY(t))},e.prototype.distance=function(t){return Math.sqrt(this.distanceSq(t))},e.prototype.distanceSq=function(t){var o=this.distanceX(t),d=this.distanceY(t);return o*o+d*d},e.prototype.length=function(){return Math.sqrt(this.lengthSq())},e.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},e.prototype.magnitude=e.prototype.length,e.prototype.isZero=function(){return this.x===0&&this.y===0},e.prototype.isEqualTo=function(t){return this.x===t.x&&this.y===t.y},e.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},e.prototype.toArray=function(){return[this.x,this.y]},e.prototype.toObject=function(){return{x:this.x,y:this.y}};var s=180/Math.PI;function n(t,o){return Math.floor(Math.random()*(o-t+1)+t)}function u(t){return t*s}function y(t){return t/s}}(K)),K.exports}var Ct=Bt();const Y=Vt(Ct);var Ut=V('<div id="canvas-box" class="svelte-5v39u4"><canvas width="1700" height="800" class="svelte-5v39u4"></canvas> <div id="edit-panel" class="svelte-5v39u4"><!></div> <div id="toolbox" class="svelte-5v39u4"><img alt="" class="tool-option svelte-5v39u4"/> <img alt="" class="tool-option svelte-5v39u4"/></div></div>');function Rt(i,r){ut(r,!0);let e,s=new Y(0,0),n=1,u=!1,y=new Y(0,0),t=new Y(0,0),o=Q.nodes,d=Q.links,g=[],_=T(q(o[0])),M=!1,m=T(!1);const b=a=>{a.clearRect(0,0,e.width,e.height),d.forEach(h=>{a.beginPath();const l=o[h.from],f=o[h.to];a.moveTo((l.position[0]-s.x)/n,(l.position[1]-s.y)/n),a.lineTo((f.position[0]-s.x)/n,(f.position[1]-s.y)/n),a.lineWidth=7.5,a.strokeStyle="black",a.stroke()}),o.forEach((h,l)=>{g[l].src=h.image;const f=Y.fromArray(h.position).subtract(s).divideScalar(n),j=25/n;a.beginPath(),a.arc(f.x,f.y,20/n,0,Math.PI*2),a.fillStyle="black",a.fill(),a.drawImage(g[l],f.x-j/2,f.y-j/2,j,j)}),requestAnimationFrame(()=>b(a))},k=a=>{const h=e.getBoundingClientRect(),l=(a.clientX-h.left+s.x)/n,f=(a.clientY-h.top+s.y)/n;return new Y(l,f)},X=a=>{if(p(m))return;const h=k(a);let l=o.find(f=>Y.fromArray(f.position).distance(h)<20);N(_,l??p(_),!0),l?a.button===0?(t=h.clone().subtract(Y.fromArray(p(_).position)),M=!0):a.button===2&&N(m,!0):(u=!0,y=h)},I=a=>{if(p(m))return;const h=k(a);if(M){let l=o.find(f=>f.id===p(_).id);if(l===void 0)throw new Error("uhhh focusNode error, it's not in the list...");l.position=h.clone().subtract(t).toArray()}else if(u){const l=h.clone().subtract(y);s.subtract(l)}},B=a=>{p(m)||(M=!1,u=!1)};at(()=>{e.addEventListener("contextmenu",h=>h.preventDefault());for(const h of o){let l=new Image;l.src=h.image,g.push(l)}let a=e==null?void 0:e.getContext("2d");a!==null&&b(a)});const C=(a,h,l,f)=>window.confirm("Save this node with new contents?")?(o[a].name=h,o[a].description=l,o[a].image=f,!0):!1,A=(a,h)=>{!a&&h&&!window.confirm("Stop editing without saving?")||N(m,!1)};var E=Ut(),S=P(E);S.__mousemove=I,S.__mousedown=X,S.__mouseup=B,L(S,a=>e=a,()=>e);var c=x(S,2),v=P(c);{var U=a=>{Lt(a,{get node_id(){return p(_).id},saveNode:C,exitNode:A})};ht(v,a=>{p(m)&&a(U)})}O(c);var w=x(c,2),Z=P(w),ft=x(Z,2);O(w),O(E),W(()=>{D(Z,"src",`${J??""}/landscape-placeholder.svg`),D(ft,"src",`${J??""}/landscape-placeholder.svg`)}),F(i,E),ct()}st(["mousemove","mousedown","mouseup"]);function Zt(i){Rt(i,{})}export{Zt as component};
