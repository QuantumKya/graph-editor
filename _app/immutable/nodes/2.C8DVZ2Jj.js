import"../chunks/CWj6FrbW.js";import"../chunks/DTqrfivI.js";import{d as it,o as gt}from"../chunks/JlMoyZ8m.js";import{h as E,V as _t,a0 as xt,N as st,O as ut,Q as Tt,R as et,a3 as kt,b as Yt,s as J,a as It,A as m,aj as Xt,r as Dt,c as zt,d as lt,f as K,j as V,W as Ct,Z as Ot,g as mt,i as bt,p as Pt,av as Z,a1 as wt,aw as qt,ar as Rt,ax as ft,ay as Ht,az as Lt,aA as Vt,aB as Bt,aC as Ft,aD as Ut,X as Gt,P as Wt,aE as Jt,aF as Kt,aG as Zt,aH as jt,aI as Qt,aJ as $t,u as te,l as ee,D as ot,as as q,ak as U,F as L,J as W,L as D,al as P,K as B,t as R,I as at,G as rt}from"../chunks/BfyPuedK.js";import{b as G,i as At}from"../chunks/DdU4pDrH.js";import{b as Mt}from"../chunks/DIhAsVuI.js";function re(r){E&&_t(r)!==null&&xt(r)}let ct=!1;function Et(){ct||(ct=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var n;if(!r.defaultPrevented)for(const t of r.target.elements)(n=t.__on_r)==null||n.call(t)})},{capture:!0}))}function ne(r){var n=Tt,t=et;st(null),ut(null);try{return r()}finally{st(n),ut(t)}}function ie(r,n,t,i=t){r.addEventListener(n,()=>ne(t));const a=r.__on_r;a?r.__on_r=()=>{a(),i(!0)}:r.__on_r=()=>i(!0),Et()}function oe(r,n){return n}function ae(r,n,t,i){for(var a=[],s=n.length,f=0;f<s;f++)Lt(n[f].e,a,!0);var e=s>0&&a.length===0&&t!==null;if(e){var o=t.parentNode;xt(o),o.append(t),i.clear(),z(r,n[0].prev,n[s-1].next)}Vt(a,()=>{for(var h=0;h<s;h++){var u=n[h];e||(i.delete(u.k),z(r,u.prev,u.next)),Bt(u.e,!e)}})}function se(r,n,t,i,a,s=null){var f=r,e={flags:n,items:new Map,first:null};{var o=r;f=E?J(_t(o)):o.appendChild(kt())}E&&It();var h=null,u=!1,_=Xt(()=>{var c=t();return Wt(c)?c:c==null?[]:wt(c)});Yt(()=>{var c=m(_),d=c.length;if(u&&d===0)return;u=d===0;let v=!1;if(E){var N=Dt(f)===zt;N!==(d===0)&&(f=lt(),J(f),K(!1),v=!0)}if(E){for(var w=null,p,x=0;x<d;x++){if(V.nodeType===Ct&&V.data===Ot){f=V,v=!0,K(!1);break}var I=c[x],k=i(I,x);p=St(V,e,w,null,I,k,x,a,n,t),e.items.set(k,p),w=p}d>0&&J(lt())}E||ue(c,e,f,a,n,i,t),s!==null&&(d===0?h?mt(h):h=bt(()=>s(f)):h!==null&&Pt(h,()=>{h=null})),v&&K(!0),m(_)}),E&&(f=V)}function ue(r,n,t,i,a,s,f){var e=r.length,o=n.items,h=n.first,u=h,_,c=null,d=[],v=[],N,w,p,x;for(x=0;x<e;x+=1){if(N=r[x],w=s(N,x),p=o.get(w),p===void 0){var I=u?u.e.nodes_start:t;c=St(I,n,c,c===null?n.first:c.next,N,w,x,i,a,f),o.set(w,c),d=[],v=[],u=c.next;continue}if(le(p,N,x),(p.e.f&Z)!==0&&mt(p.e),p!==u){if(_!==void 0&&_.has(p)){if(d.length<v.length){var k=v[0],S;c=k.prev;var A=d[0],Y=d[d.length-1];for(S=0;S<d.length;S+=1)ht(d[S],k,t);for(S=0;S<v.length;S+=1)_.delete(v[S]);z(n,A.prev,Y.next),z(n,c,A),z(n,Y,k),u=k,c=Y,x-=1,d=[],v=[]}else _.delete(p),ht(p,u,t),z(n,p.prev,p.next),z(n,p,c===null?n.first:c.next),z(n,c,p),c=p;continue}for(d=[],v=[];u!==null&&u.k!==w;)(u.e.f&Z)===0&&(_??(_=new Set)).add(u),v.push(u),u=u.next;if(u===null)continue;p=u}d.push(p),c=p,u=p.next}if(u!==null||_!==void 0){for(var X=_===void 0?[]:wt(_);u!==null;)(u.e.f&Z)===0&&X.push(u),u=u.next;var g=X.length;if(g>0){var T=e===0?t:null;ae(n,X,T,o)}}et.first=n.first&&n.first.e,et.last=c&&c.e}function le(r,n,t,i){qt(r.v,n),r.i=t}function St(r,n,t,i,a,s,f,e,o,h){var u=(o&Ft)!==0,_=(o&Ut)===0,c=u?_?Rt(a,!1,!1):ft(a):a,d=(o&Ht)===0?f:ft(f),v={i:d,v:c,k:s,a:null,e:null,prev:t,next:i};try{return v.e=bt(()=>e(r,c,d,h),E),v.e.prev=t&&t.e,v.e.next=i&&i.e,t===null?n.first=v:(t.next=v,t.e.next=v.e),i!==null&&(i.prev=v,i.e.prev=v.e),v}finally{}}function ht(r,n,t){for(var i=r.next?r.next.e.nodes_start:t,a=n?n.e.nodes_start:t,s=r.e.nodes_start;s!==i;){var f=Gt(s);a.before(s),s=f}}function z(r,n,t){n===null?r.first=t:(n.next=t,n.e.next=t&&t.e),t!==null&&(t.prev=n,t.e.prev=n&&n.e)}function Nt(r){var n,t,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(n=0;n<a;n++)r[n]&&(t=Nt(r[n]))&&(i&&(i+=" "),i+=t)}else for(t in r)r[t]&&(i&&(i+=" "),i+=t);return i}function fe(){for(var r,n,t=0,i="",a=arguments.length;t<a;t++)(r=arguments[t])&&(n=Nt(r))&&(i&&(i+=" "),i+=n);return i}function ce(r){return typeof r=="object"?fe(r):r??""}function he(r,n,t){var i=r==null?"":""+r;return i===""?null:i}function dt(r,n=!1){var t=n?" !important;":";",i="";for(var a in r){var s=r[a];s!=null&&s!==""&&(i+=" "+a+": "+s+t)}return i}function de(r,n){if(n){var t="",i,a;return Array.isArray(n)?(i=n[0],a=n[1]):i=n,i&&(t+=dt(i)),a&&(t+=dt(a,!0)),t=t.trim(),t===""?null:t}return String(r)}function O(r,n,t,i,a,s){var f=r.__className;if(E||f!==t||f===void 0){var e=he(t);(!E||e!==r.getAttribute("class"))&&(e==null?r.removeAttribute("class"):r.className=e),r.__className=t}return s}function j(r,n={},t,i){for(var a in t){var s=t[a];n[a]!==s&&(t[a]==null?r.style.removeProperty(a):r.style.setProperty(a,s,i))}}function pe(r,n,t,i){var a=r.__style;if(E||a!==n){var s=de(n,i);(!E||s!==r.getAttribute("style"))&&(s==null?r.removeAttribute("style"):r.style.cssText=s),r.__style=n}else i&&(Array.isArray(i)?(j(r,t==null?void 0:t[0],i[0]),j(r,t==null?void 0:t[1],i[1],"important")):j(r,t,i));return i}const ye=Symbol("is custom element"),ve=Symbol("is html");function ge(r){if(E){var n=!1,t=()=>{if(!n){if(n=!0,r.hasAttribute("value")){var i=r.value;H(r,"value",null),r.value=i}if(r.hasAttribute("checked")){var a=r.checked;H(r,"checked",null),r.checked=a}}};r.__on_r=t,jt(t),Et()}}function H(r,n,t,i){var a=_e(r);E&&(a[n]=r.getAttribute(n),n==="src"||n==="srcset"||n==="href"&&r.nodeName==="LINK")||a[n]!==(a[n]=t)&&(n==="loading"&&(r[Jt]=t),t==null?r.removeAttribute(n):typeof t!="string"&&xe(r).includes(n)?r[n]=t:r.setAttribute(n,t))}function _e(r){return r.__attributes??(r.__attributes={[ye]:r.nodeName.includes("-"),[ve]:r.namespaceURI===Kt})}var pt=new Map;function xe(r){var n=pt.get(r.nodeName);if(n)return n;pt.set(r.nodeName,n=[]);for(var t,i=r,a=Element.prototype;a!==i;){t=Qt(i);for(var s in t)t[s].set&&n.push(s);i=Zt(i)}return n}function yt(r,n,t=n){var i=$t();ie(r,"input",a=>{var s=a?r.defaultValue:r.value;if(s=Q(r)?$(s):s,t(s),i&&s!==(s=n())){var f=r.selectionStart,e=r.selectionEnd;r.value=s??"",e!==null&&(r.selectionStart=f,r.selectionEnd=Math.min(e,r.value.length))}}),(E&&r.defaultValue!==r.value||te(n)==null&&r.value)&&t(Q(r)?$(r.value):r.value),ee(()=>{var a=n();Q(r)&&a===$(r.value)||r.type==="date"&&!a&&!r.value||a!==r.value&&(r.value=a??"")})}function Q(r){var n=r.type;return n==="number"||n==="range"}function $(r){return r===""?null:+r}const me=[{id:0,name:"Addition",description:"",image:"",position:[100,100]},{id:1,name:"Subtraction",description:"",image:"",position:[300,150]},{id:2,name:"Multiplication",description:"",image:"",position:[200,300]},{id:3,name:"Division",description:"",image:"",position:[300,450]}],be=[{from:0,to:1},{from:0,to:2},{from:2,to:3}],nt={nodes:me,links:be};var we=L('<img alt="Uploaded Icon" class="rounded-lg w-[300px]"/>'),Ae=L('<img alt="Uploaded Icon" class="rounded-lg w-[300px]"/>'),Me=L('<div class="flex flex-col gap-3.5 max-w-[350px] h-fit bg-neutral-950 text-white p-2.5 rounded-xl"><input type="text" placeholder="Node Title"/> <button>Upload Image</button> <input type="file" accept="image/*"/> <!> <textarea rows="6" maxlength="400" placeholder="Node Description"></textarea> <button>Save</button> <button>Exit</button></div>');function Ee(r,n){ot(n,!0);const i=nt.nodes[n.node_id];let a=q(U(i.name)),s=q(U(i.description)),f=q(U(i.image)),e,o,h,u=!1,_=!1;gt(()=>{o.value=i.name,h.value=i.description});const c=()=>{u=!0},d="bg-neutral-800 text-white border-blue-500 text-center rounded-xl border-2 w-fit p-2 pt-1 transition duration-200 hover:bg-gray-700",v="font-mono text-lg bg-neutral-800 text-white rounded-xl p-2 pl-3 transition duration-300 focus:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none";var N=Me(),w=W(N);ge(w),O(w,1,v),w.__change=c,G(w,g=>o=g,()=>o);var p=D(w,2);O(p,1,d),p.__click=g=>{e.click()};var x=D(p,2);x.__change=g=>{const T=g.target;if(!T.files||T.files.length===0)return;const l=T.files[0],y=new FileReader;y.onload=()=>{typeof y.result=="string"&&P(f,y.result,!0)},y.readAsDataURL(l),c()},pe(x,"",{},{display:"none"}),G(x,g=>e=g,()=>e);var I=D(x,2);{var k=g=>{var T=we();rt(()=>H(T,"src",m(f))),R(g,T)},S=g=>{var T=Ae();rt(()=>H(T,"src",`${Mt??""}/landscape-placeholder.svg`)),R(g,T)};At(I,g=>{m(f)!=""?g(k):g(S,!1)})}var A=D(I,2);re(A),O(A,1,"font-mono text-lg bg-neutral-800 text-white rounded-xl p-2 pl-3 transition duration-300 focus:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none placeholder:text-neutral-400 resize-none overflow-scroll"),A.__change=c,G(A,g=>h=g,()=>h);var Y=D(A,2);O(Y,1,d),Y.__click=()=>{_=n.saveNode(n.node_id,m(a),m(s),m(f))};var X=D(Y,2);O(X,1,d),X.__click=()=>n.exitNode(_,u),B(N),yt(w,()=>m(a),g=>P(a,g)),yt(A,()=>m(s),g=>P(s,g)),R(r,N),at()}it(["change","click"]);var Se=L("<button><img/></button>"),Ne=L('<div class="flex absolute rounded-xl bg-neutral-200 border-blue-300 border-2 p-[15px] pt-[5px] pb-[5px] h-fit bottom-6 left-[50%] transform -translate-[50%]"></div>');function Te(r,n){ot(n,!0);let t=q(0),i=["node_add.png","node_edit.png","node_drag.png","link.png"];var a=Ne();se(a,21,()=>i,oe,(s,f,e)=>{var o=Se();o.__click=()=>P(t,e,!0);var h=W(o);B(o),rt(u=>{O(o,1,`p-2.5 rounded-xl border-none outline-none transition duration-200 hover:bg-blue-300 ${m(t)===e?"bg-gray-500 mt-auto mb-auto":"mt-[10px] mb-[10px]"}`),H(h,"src",`${Mt??""}/mode_icons/${m(f)??""}`),H(h,"alt",u),O(h,1,ce(m(t)===e?"max-w-[40px] rounded-xl":"max-w-[30px] rounded-lg"))},[()=>i[m(t)].split(".")[0]]),R(s,o)}),B(a),R(r,a),at()}it(["click"]);function ke(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var tt={exports:{}},vt;function Ye(){return vt||(vt=1,function(r,n){r.exports=t;function t(e,o){if(!(this instanceof t))return new t(e,o);this.x=e||0,this.y=o||0}t.fromArray=function(e){return new t(e[0]||0,e[1]||0)},t.fromObject=function(e){return new t(e.x||0,e.y||0)},t.prototype.addX=function(e){return this.x+=e.x,this},t.prototype.addY=function(e){return this.y+=e.y,this},t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.addScalar=function(e){return this.x+=e,this.y+=e,this},t.prototype.addScalarX=function(e){return this.x+=e,this},t.prototype.addScalarY=function(e){return this.y+=e,this},t.prototype.subtractX=function(e){return this.x-=e.x,this},t.prototype.subtractY=function(e){return this.y-=e.y,this},t.prototype.subtract=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.subtractScalar=function(e){return this.x-=e,this.y-=e,this},t.prototype.subtractScalarX=function(e){return this.x-=e,this},t.prototype.subtractScalarY=function(e){return this.y-=e,this},t.prototype.divideX=function(e){return this.x/=e.x,this},t.prototype.divideY=function(e){return this.y/=e.y,this},t.prototype.divide=function(e){return this.x/=e.x,this.y/=e.y,this},t.prototype.divideScalar=function(e){return e!==0?(this.x/=e,this.y/=e):(this.x=0,this.y=0),this},t.prototype.divideScalarX=function(e){return e!==0?this.x/=e:this.x=0,this},t.prototype.divideScalarY=function(e){return e!==0?this.y/=e:this.y=0,this},t.prototype.invertX=function(){return this.x*=-1,this},t.prototype.invertY=function(){return this.y*=-1,this},t.prototype.invert=function(){return this.invertX(),this.invertY(),this},t.prototype.multiplyX=function(e){return this.x*=e.x,this},t.prototype.multiplyY=function(e){return this.y*=e.y,this},t.prototype.multiply=function(e){return this.x*=e.x,this.y*=e.y,this},t.prototype.multiplyScalar=function(e){return this.x*=e,this.y*=e,this},t.prototype.multiplyScalarX=function(e){return this.x*=e,this},t.prototype.multiplyScalarY=function(e){return this.y*=e,this},t.prototype.normalize=function(){var e=this.length();return e===0?(this.x=1,this.y=0):this.divide(t(e,e)),this},t.prototype.norm=t.prototype.normalize,t.prototype.limit=function(e,o){return Math.abs(this.x)>e&&(this.x*=o),Math.abs(this.y)>e&&(this.y*=o),this},t.prototype.randomize=function(e,o){return this.randomizeX(e,o),this.randomizeY(e,o),this},t.prototype.randomizeX=function(e,o){var h=Math.min(e.x,o.x),u=Math.max(e.x,o.x);return this.x=a(h,u),this},t.prototype.randomizeY=function(e,o){var h=Math.min(e.y,o.y),u=Math.max(e.y,o.y);return this.y=a(h,u),this},t.prototype.randomizeAny=function(e,o){return Math.round(Math.random())?this.randomizeX(e,o):this.randomizeY(e,o),this},t.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.prototype.toFixed=function(e){return typeof e>"u"&&(e=8),this.x=this.x.toFixed(e),this.y=this.y.toFixed(e),this},t.prototype.mixX=function(e,o){return typeof o>"u"&&(o=.5),this.x=(1-o)*this.x+o*e.x,this},t.prototype.mixY=function(e,o){return typeof o>"u"&&(o=.5),this.y=(1-o)*this.y+o*e.y,this},t.prototype.mix=function(e,o){return this.mixX(e,o),this.mixY(e,o),this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyX=function(e){return this.x=e.x,this},t.prototype.copyY=function(e){return this.y=e.y,this},t.prototype.copy=function(e){return this.copyX(e),this.copyY(e),this},t.prototype.zero=function(){return this.x=this.y=0,this},t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.cross=function(e){return this.x*e.y-this.y*e.x},t.prototype.projectOnto=function(e){var o=(this.x*e.x+this.y*e.y)/(e.x*e.x+e.y*e.y);return this.x=o*e.x,this.y=o*e.y,this},t.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},t.prototype.horizontalAngleDeg=function(){return s(this.horizontalAngle())},t.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},t.prototype.verticalAngleDeg=function(){return s(this.verticalAngle())},t.prototype.angle=t.prototype.horizontalAngle,t.prototype.angleDeg=t.prototype.horizontalAngleDeg,t.prototype.direction=t.prototype.horizontalAngle,t.prototype.rotate=function(e){var o=this.x*Math.cos(e)-this.y*Math.sin(e),h=this.x*Math.sin(e)+this.y*Math.cos(e);return this.x=o,this.y=h,this},t.prototype.rotateDeg=function(e){return e=f(e),this.rotate(e)},t.prototype.rotateTo=function(e){return this.rotate(e-this.angle())},t.prototype.rotateToDeg=function(e){return e=f(e),this.rotateTo(e)},t.prototype.rotateBy=function(e){var o=this.angle()+e;return this.rotate(o)},t.prototype.rotateByDeg=function(e){return e=f(e),this.rotateBy(e)},t.prototype.distanceX=function(e){return this.x-e.x},t.prototype.absDistanceX=function(e){return Math.abs(this.distanceX(e))},t.prototype.distanceY=function(e){return this.y-e.y},t.prototype.absDistanceY=function(e){return Math.abs(this.distanceY(e))},t.prototype.distance=function(e){return Math.sqrt(this.distanceSq(e))},t.prototype.distanceSq=function(e){var o=this.distanceX(e),h=this.distanceY(e);return o*o+h*h},t.prototype.length=function(){return Math.sqrt(this.lengthSq())},t.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},t.prototype.magnitude=t.prototype.length,t.prototype.isZero=function(){return this.x===0&&this.y===0},t.prototype.isEqualTo=function(e){return this.x===e.x&&this.y===e.y},t.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},t.prototype.toArray=function(){return[this.x,this.y]},t.prototype.toObject=function(){return{x:this.x,y:this.y}};var i=180/Math.PI;function a(e,o){return Math.floor(Math.random()*(o-e+1)+e)}function s(e){return e*i}function f(e){return e/i}}(tt)),tt.exports}var Ie=Ye();const C=ke(Ie);var Xe=L('<div id="canvas-box" class="relative inline-block overflow-hidden"><canvas class="bg-neutral-100 active:cursor-grabbing"></canvas> <div id="edit-panel" class="absolute right-2.5 top-2.5"><!></div> <!></div>');function De(r,n){ot(n,!0);let t,i=new C(0,0),a=1,s=!1,f=new C(0,0),e=new C(0,0),o=nt.nodes,h=nt.links,u=[],_=q(U(o[0])),c=!1,d=q(!1);const v=l=>{t.width=window.innerWidth,t.height=window.innerHeight,l.clearRect(0,0,t.width,t.height),h.forEach(y=>{l.beginPath();const b=o[y.from],M=o[y.to];l.moveTo((b.position[0]-i.x)/a,(b.position[1]-i.y)/a),l.lineTo((M.position[0]-i.x)/a,(M.position[1]-i.y)/a),l.lineWidth=7.5,l.strokeStyle="black",l.stroke()}),o.forEach((y,b)=>{u[b].src=y.image;const M=C.fromArray(y.position).subtract(i).divideScalar(a),F=25/a;l.beginPath(),l.arc(M.x,M.y,20/a,0,Math.PI*2),l.fillStyle="black",l.fill(),l.drawImage(u[b],M.x-F/2,M.y-F/2,F,F)}),requestAnimationFrame(()=>v(l))},N=l=>{const y=t.getBoundingClientRect(),b=(l.clientX-y.left+i.x)/a,M=(l.clientY-y.top+i.y)/a;return new C(b,M)},w=l=>{if(m(d))return;const y=N(l);let b=o.find(M=>C.fromArray(M.position).distance(y)<20);P(_,b??m(_),!0),b?l.button===0?(e=y.clone().subtract(C.fromArray(m(_).position)),c=!0):l.button===2&&P(d,!0):(s=!0,f=y)},p=l=>{if(m(d))return;const y=N(l);if(c){let b=o.find(M=>M.id===m(_).id);if(b===void 0)throw new Error("uhhh focusNode error, it's not in the list...");b.position=y.clone().subtract(e).toArray()}else if(s){const b=y.clone().subtract(f);i.subtract(b)}},x=l=>{m(d)||(c=!1,s=!1)},I=(l,y,b,M)=>window.confirm("Save this node with new contents?")?(o[l].name=y,o[l].description=b,o[l].image=M,!0):!1,k=(l,y)=>{!l&&y&&!window.confirm("Stop editing without saving?")||P(d,!1)};gt(()=>{t.addEventListener("contextmenu",y=>y.preventDefault());for(const y of o){let b=new Image;b.src=y.image,u.push(b)}let l=t==null?void 0:t.getContext("2d");l!==null&&v(l)});var S=Xe(),A=W(S);A.__mousemove=p,A.__mousedown=w,A.__mouseup=x,G(A,l=>t=l,()=>t);var Y=D(A,2),X=W(Y);{var g=l=>{Ee(l,{get node_id(){return m(_).id},saveNode:I,exitNode:k})};At(X,l=>{m(d)&&l(g)})}B(Y);var T=D(Y,2);Te(T,{}),B(S),R(r,S),at()}it(["mousemove","mousedown","mouseup"]);function He(r){De(r,{})}export{He as component};
