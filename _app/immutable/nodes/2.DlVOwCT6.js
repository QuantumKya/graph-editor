import"../chunks/CWj6FrbW.js";import"../chunks/DQRv2_04.js";import{d as it,o as vt}from"../chunks/RlHVghCd.js";import{h as E,V as gt,a0 as _t,N as ot,O as at,Q as Tt,R as et,a3 as Yt,b as It,s as J,a as Xt,A as g,aj as Dt,r as kt,c as zt,d as st,f as K,j as V,W as Ot,Z as Ct,g as xt,i as mt,p as Pt,av as Z,a1 as bt,aw as qt,ar as Lt,ax as ut,ay as Rt,az as Vt,aA as Bt,aB as Ft,aC as Ht,aD as Ut,X as Gt,P as Wt,aE as Jt,aF as Kt,aG as Zt,aH as Qt,aI as jt,aJ as $t,u as te,l as ee,D as wt,as as q,ak as U,F as R,J as W,L as k,al as P,K as B,t as L,I as At,G as rt}from"../chunks/BBISlZlx.js";import{b as G,i as Mt}from"../chunks/BhQyqW4B.js";import{b as Et}from"../chunks/CPT4CxFb.js";function re(r){E&&gt(r)!==null&&_t(r)}let lt=!1;function St(){lt||(lt=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var n;if(!r.defaultPrevented)for(const e of r.target.elements)(n=e.__on_r)==null||n.call(e)})},{capture:!0}))}function ne(r){var n=Tt,e=et;ot(null),at(null);try{return r()}finally{ot(n),at(e)}}function ie(r,n,e,i=e){r.addEventListener(n,()=>ne(e));const a=r.__on_r;a?r.__on_r=()=>{a(),i(!0)}:r.__on_r=()=>i(!0),St()}function oe(r,n){return n}function ae(r,n,e,i){for(var a=[],s=n.length,u=0;u<s;u++)Vt(n[u].e,a,!0);var t=s>0&&a.length===0&&e!==null;if(t){var o=e.parentNode;_t(o),o.append(e),i.clear(),z(r,n[0].prev,n[s-1].next)}Bt(a,()=>{for(var h=0;h<s;h++){var l=n[h];t||(i.delete(l.k),z(r,l.prev,l.next)),Ft(l.e,!t)}})}function se(r,n,e,i,a,s=null){var u=r,t={flags:n,items:new Map,first:null};{var o=r;u=E?J(gt(o)):o.appendChild(Yt())}E&&Xt();var h=null,l=!1,_=Dt(()=>{var c=e();return Wt(c)?c:c==null?[]:bt(c)});It(()=>{var c=g(_),d=c.length;if(l&&d===0)return;l=d===0;let v=!1;if(E){var N=kt(u)===zt;N!==(d===0)&&(u=st(),J(u),K(!1),v=!0)}if(E){for(var w=null,p,m=0;m<d;m++){if(V.nodeType===Ot&&V.data===Ct){u=V,v=!0,K(!1);break}var X=c[m],Y=i(X,m);p=Nt(V,t,w,null,X,Y,m,a,n,e),t.items.set(Y,p),w=p}d>0&&J(st())}E||ue(c,t,u,a,n,i,e),s!==null&&(d===0?h?xt(h):h=mt(()=>s(u)):h!==null&&Pt(h,()=>{h=null})),v&&K(!0),g(_)}),E&&(u=V)}function ue(r,n,e,i,a,s,u){var t=r.length,o=n.items,h=n.first,l=h,_,c=null,d=[],v=[],N,w,p,m;for(m=0;m<t;m+=1){if(N=r[m],w=s(N,m),p=o.get(w),p===void 0){var X=l?l.e.nodes_start:e;c=Nt(X,n,c,c===null?n.first:c.next,N,w,m,i,a,u),o.set(w,c),d=[],v=[],l=c.next;continue}if(le(p,N,m),(p.e.f&Z)!==0&&xt(p.e),p!==l){if(_!==void 0&&_.has(p)){if(d.length<v.length){var Y=v[0],S;c=Y.prev;var A=d[0],I=d[d.length-1];for(S=0;S<d.length;S+=1)ft(d[S],Y,e);for(S=0;S<v.length;S+=1)_.delete(v[S]);z(n,A.prev,I.next),z(n,c,A),z(n,I,Y),l=Y,c=I,m-=1,d=[],v=[]}else _.delete(p),ft(p,l,e),z(n,p.prev,p.next),z(n,p,c===null?n.first:c.next),z(n,c,p),c=p;continue}for(d=[],v=[];l!==null&&l.k!==w;)(l.e.f&Z)===0&&(_??(_=new Set)).add(l),v.push(l),l=l.next;if(l===null)continue;p=l}d.push(p),c=p,l=p.next}if(l!==null||_!==void 0){for(var D=_===void 0?[]:bt(_);l!==null;)(l.e.f&Z)===0&&D.push(l),l=l.next;var x=D.length;if(x>0){var T=t===0?e:null;ae(n,D,T,o)}}et.first=n.first&&n.first.e,et.last=c&&c.e}function le(r,n,e,i){qt(r.v,n),r.i=e}function Nt(r,n,e,i,a,s,u,t,o,h){var l=(o&Ht)!==0,_=(o&Ut)===0,c=l?_?Lt(a,!1,!1):ut(a):a,d=(o&Rt)===0?u:ut(u),v={i:d,v:c,k:s,a:null,e:null,prev:e,next:i};try{return v.e=mt(()=>t(r,c,d,h),E),v.e.prev=e&&e.e,v.e.next=i&&i.e,e===null?n.first=v:(e.next=v,e.e.next=v.e),i!==null&&(i.prev=v,i.e.prev=v.e),v}finally{}}function ft(r,n,e){for(var i=r.next?r.next.e.nodes_start:e,a=n?n.e.nodes_start:e,s=r.e.nodes_start;s!==i;){var u=Gt(s);a.before(s),s=u}}function z(r,n,e){n===null?r.first=e:(n.next=e,n.e.next=e&&e.e),e!==null&&(e.prev=n,e.e.prev=n&&n.e)}const ct=[...` 	
\r\fÂ \v\uFEFF`];function fe(r,n,e){var i=r==null?"":""+r;if(n&&(i=i?i+" "+n:n),e){for(var a in e)if(e[a])i=i?i+" "+a:a;else if(i.length)for(var s=a.length,u=0;(u=i.indexOf(a,u))>=0;){var t=u+s;(u===0||ct.includes(i[u-1]))&&(t===i.length||ct.includes(i[t]))?i=(u===0?"":i.substring(0,u))+i.substring(t+1):u=t}}return i===""?null:i}function ht(r,n=!1){var e=n?" !important;":";",i="";for(var a in r){var s=r[a];s!=null&&s!==""&&(i+=" "+a+": "+s+e)}return i}function ce(r,n){if(n){var e="",i,a;return Array.isArray(n)?(i=n[0],a=n[1]):i=n,i&&(e+=ht(i)),a&&(e+=ht(a,!0)),e=e.trim(),e===""?null:e}return String(r)}function C(r,n,e,i,a,s){var u=r.__className;if(E||u!==e||u===void 0){var t=fe(e,i,s);(!E||t!==r.getAttribute("class"))&&(t==null?r.removeAttribute("class"):r.className=t),r.__className=e}else if(s&&a!==s)for(var o in s){var h=!!s[o];(a==null||h!==!!a[o])&&r.classList.toggle(o,h)}return s}function Q(r,n={},e,i){for(var a in e){var s=e[a];n[a]!==s&&(e[a]==null?r.style.removeProperty(a):r.style.setProperty(a,s,i))}}function he(r,n,e,i){var a=r.__style;if(E||a!==n){var s=ce(n,i);(!E||s!==r.getAttribute("style"))&&(s==null?r.removeAttribute("style"):r.style.cssText=s),r.__style=n}else i&&(Array.isArray(i)?(Q(r,e==null?void 0:e[0],i[0]),Q(r,e==null?void 0:e[1],i[1],"important")):Q(r,e,i));return i}const de=Symbol("is custom element"),pe=Symbol("is html");function ye(r){if(E){var n=!1,e=()=>{if(!n){if(n=!0,r.hasAttribute("value")){var i=r.value;F(r,"value",null),r.value=i}if(r.hasAttribute("checked")){var a=r.checked;F(r,"checked",null),r.checked=a}}};r.__on_r=e,Zt(e),St()}}function F(r,n,e,i){var a=ve(r);E&&(a[n]=r.getAttribute(n),n==="src"||n==="srcset"||n==="href"&&r.nodeName==="LINK")||a[n]!==(a[n]=e)&&(n==="loading"&&(r[Qt]=e),e==null?r.removeAttribute(n):typeof e!="string"&&ge(r).includes(n)?r[n]=e:r.setAttribute(n,e))}function ve(r){return r.__attributes??(r.__attributes={[de]:r.nodeName.includes("-"),[pe]:r.namespaceURI===Jt})}var dt=new Map;function ge(r){var n=dt.get(r.nodeName);if(n)return n;dt.set(r.nodeName,n=[]);for(var e,i=r,a=Element.prototype;a!==i;){e=jt(i);for(var s in e)e[s].set&&n.push(s);i=Kt(i)}return n}function pt(r,n,e=n){var i=$t();ie(r,"input",a=>{var s=a?r.defaultValue:r.value;if(s=j(r)?$(s):s,e(s),i&&s!==(s=n())){var u=r.selectionStart,t=r.selectionEnd;r.value=s??"",t!==null&&(r.selectionStart=u,r.selectionEnd=Math.min(t,r.value.length))}}),(E&&r.defaultValue!==r.value||te(n)==null&&r.value)&&e(j(r)?$(r.value):r.value),ee(()=>{var a=n();j(r)&&a===$(r.value)||r.type==="date"&&!a&&!r.value||a!==r.value&&(r.value=a??"")})}function j(r){var n=r.type;return n==="number"||n==="range"}function $(r){return r===""?null:+r}const _e=[{id:0,name:"Addition",description:"",image:"",position:[100,100]},{id:1,name:"Subtraction",description:"",image:"",position:[300,150]},{id:2,name:"Multiplication",description:"",image:"",position:[200,300]},{id:3,name:"Division",description:"",image:"",position:[300,450]}],xe=[{from:0,to:1},{from:0,to:2},{from:2,to:3}],nt={nodes:_e,links:xe};var me=R('<img alt="Uploaded Icon" class="rounded-lg w-[300px]"/>'),be=R('<img alt="Uploaded Icon" class="rounded-lg w-[300px]"/>'),we=R('<div class="flex flex-col gap-3.5 max-w-[350px] h-fit bg-neutral-950 text-white p-2.5 rounded-xl"><input type="text" placeholder="Node Title"/> <button>Upload Image</button> <input type="file" accept="image/*"/> <!> <textarea rows="6" maxlength="400" placeholder="Node Description"></textarea> <button>Save</button> <button>Exit</button></div>');function Ae(r,n){wt(n,!0);const i=nt.nodes[n.node_id];let a=q(U(i.name)),s=q(U(i.description)),u=q(U(i.image)),t,o,h,l=!1,_=!1;vt(()=>{o.value=i.name,h.value=i.description});const c=()=>{l=!0},d="bg-neutral-800 text-white border-blue-500 text-center rounded-xl border-2 w-fit p-2 pt-1 transition duration-200 hover:bg-gray-700",v="font-mono text-lg bg-neutral-800 text-white rounded-xl p-2 pl-3 transition duration-300 focus:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none";var N=we(),w=W(N);ye(w),C(w,1,v),w.__change=c,G(w,x=>o=x,()=>o);var p=k(w,2);C(p,1,d),p.__click=x=>{t.click()};var m=k(p,2);m.__change=x=>{const T=x.target;if(!T.files||T.files.length===0)return;const f=T.files[0],y=new FileReader;y.onload=()=>{typeof y.result=="string"&&P(u,y.result,!0)},y.readAsDataURL(f),c()},he(m,"",{},{display:"none"}),G(m,x=>t=x,()=>t);var X=k(m,2);{var Y=x=>{var T=me();rt(()=>F(T,"src",g(u))),L(x,T)},S=x=>{var T=be();rt(()=>F(T,"src",`${Et??""}/landscape-placeholder.svg`)),L(x,T)};Mt(X,x=>{g(u)!=""?x(Y):x(S,!1)})}var A=k(X,2);re(A),C(A,1,"font-mono text-lg bg-neutral-800 text-white rounded-xl p-2 pl-3 transition duration-300 focus:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none placeholder:text-neutral-400 resize-none overflow-scroll"),A.__change=c,G(A,x=>h=x,()=>h);var I=k(A,2);C(I,1,d),I.__click=()=>{_=n.saveNode(n.node_id,g(a),g(s),g(u))};var D=k(I,2);C(D,1,d),D.__click=()=>n.exitNode(_,l),B(N),pt(w,()=>g(a),x=>P(a,x)),pt(A,()=>g(s),x=>P(s,x)),L(r,N),At()}it(["change","click"]);var Me=R('<button><img alt=""/></button>'),Ee=R('<div class="flex absolute rounded-xl bg-neutral-200 border-blue-300 border-2 p-[15px] pt-[5px] pb-[5px] h-fit bottom-8 left-[calc(50%-55px)]"></div>');function Se(r){let n=q(0),e=["add","edit","drag","link"],i=["node_add.png","node_edit.png","node_drag.png","link.png"];var a=Ee();se(a,21,()=>e,oe,(s,u,t)=>{var o=Me();let h;o.__click=c=>P(n,t,!0);var l=W(o);let _;B(o),rt((c,d)=>{h=C(o,1,`p-2.5 rounded-xl border-none outline-none transition duration-200 hover:bg-blue-300 ${g(n)===t?"bg-gray-500":""}`,null,h,c),F(l,"src",`${Et??""}/mode_icons/${i[t]??""}`),_=C(l,1,"",null,_,d)},[()=>({"mt-[10px]":g(n)!==t,"mb-[10px]":g(n)!==t,"mt-auto":g(n)===t,"mb-auto":g(n)===t}),()=>({"max-w-[40px]":g(n)===t,"max-w-[30px]":g(n)!==t,"rounded-xl":g(n)===t,"rounded-lg":g(n)!==t})]),L(s,o)}),B(a),L(r,a)}it(["click"]);function Ne(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var tt={exports:{}},yt;function Te(){return yt||(yt=1,function(r,n){r.exports=e;function e(t,o){if(!(this instanceof e))return new e(t,o);this.x=t||0,this.y=o||0}e.fromArray=function(t){return new e(t[0]||0,t[1]||0)},e.fromObject=function(t){return new e(t.x||0,t.y||0)},e.prototype.addX=function(t){return this.x+=t.x,this},e.prototype.addY=function(t){return this.y+=t.y,this},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},e.prototype.addScalarX=function(t){return this.x+=t,this},e.prototype.addScalarY=function(t){return this.y+=t,this},e.prototype.subtractX=function(t){return this.x-=t.x,this},e.prototype.subtractY=function(t){return this.y-=t.y,this},e.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.subtractScalar=function(t){return this.x-=t,this.y-=t,this},e.prototype.subtractScalarX=function(t){return this.x-=t,this},e.prototype.subtractScalarY=function(t){return this.y-=t,this},e.prototype.divideX=function(t){return this.x/=t.x,this},e.prototype.divideY=function(t){return this.y/=t.y,this},e.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},e.prototype.divideScalar=function(t){return t!==0?(this.x/=t,this.y/=t):(this.x=0,this.y=0),this},e.prototype.divideScalarX=function(t){return t!==0?this.x/=t:this.x=0,this},e.prototype.divideScalarY=function(t){return t!==0?this.y/=t:this.y=0,this},e.prototype.invertX=function(){return this.x*=-1,this},e.prototype.invertY=function(){return this.y*=-1,this},e.prototype.invert=function(){return this.invertX(),this.invertY(),this},e.prototype.multiplyX=function(t){return this.x*=t.x,this},e.prototype.multiplyY=function(t){return this.y*=t.y,this},e.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},e.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},e.prototype.multiplyScalarX=function(t){return this.x*=t,this},e.prototype.multiplyScalarY=function(t){return this.y*=t,this},e.prototype.normalize=function(){var t=this.length();return t===0?(this.x=1,this.y=0):this.divide(e(t,t)),this},e.prototype.norm=e.prototype.normalize,e.prototype.limit=function(t,o){return Math.abs(this.x)>t&&(this.x*=o),Math.abs(this.y)>t&&(this.y*=o),this},e.prototype.randomize=function(t,o){return this.randomizeX(t,o),this.randomizeY(t,o),this},e.prototype.randomizeX=function(t,o){var h=Math.min(t.x,o.x),l=Math.max(t.x,o.x);return this.x=a(h,l),this},e.prototype.randomizeY=function(t,o){var h=Math.min(t.y,o.y),l=Math.max(t.y,o.y);return this.y=a(h,l),this},e.prototype.randomizeAny=function(t,o){return Math.round(Math.random())?this.randomizeX(t,o):this.randomizeY(t,o),this},e.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},e.prototype.toFixed=function(t){return typeof t>"u"&&(t=8),this.x=this.x.toFixed(t),this.y=this.y.toFixed(t),this},e.prototype.mixX=function(t,o){return typeof o>"u"&&(o=.5),this.x=(1-o)*this.x+o*t.x,this},e.prototype.mixY=function(t,o){return typeof o>"u"&&(o=.5),this.y=(1-o)*this.y+o*t.y,this},e.prototype.mix=function(t,o){return this.mixX(t,o),this.mixY(t,o),this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyX=function(t){return this.x=t.x,this},e.prototype.copyY=function(t){return this.y=t.y,this},e.prototype.copy=function(t){return this.copyX(t),this.copyY(t),this},e.prototype.zero=function(){return this.x=this.y=0,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.cross=function(t){return this.x*t.y-this.y*t.x},e.prototype.projectOnto=function(t){var o=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=o*t.x,this.y=o*t.y,this},e.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},e.prototype.horizontalAngleDeg=function(){return s(this.horizontalAngle())},e.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},e.prototype.verticalAngleDeg=function(){return s(this.verticalAngle())},e.prototype.angle=e.prototype.horizontalAngle,e.prototype.angleDeg=e.prototype.horizontalAngleDeg,e.prototype.direction=e.prototype.horizontalAngle,e.prototype.rotate=function(t){var o=this.x*Math.cos(t)-this.y*Math.sin(t),h=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=o,this.y=h,this},e.prototype.rotateDeg=function(t){return t=u(t),this.rotate(t)},e.prototype.rotateTo=function(t){return this.rotate(t-this.angle())},e.prototype.rotateToDeg=function(t){return t=u(t),this.rotateTo(t)},e.prototype.rotateBy=function(t){var o=this.angle()+t;return this.rotate(o)},e.prototype.rotateByDeg=function(t){return t=u(t),this.rotateBy(t)},e.prototype.distanceX=function(t){return this.x-t.x},e.prototype.absDistanceX=function(t){return Math.abs(this.distanceX(t))},e.prototype.distanceY=function(t){return this.y-t.y},e.prototype.absDistanceY=function(t){return Math.abs(this.distanceY(t))},e.prototype.distance=function(t){return Math.sqrt(this.distanceSq(t))},e.prototype.distanceSq=function(t){var o=this.distanceX(t),h=this.distanceY(t);return o*o+h*h},e.prototype.length=function(){return Math.sqrt(this.lengthSq())},e.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},e.prototype.magnitude=e.prototype.length,e.prototype.isZero=function(){return this.x===0&&this.y===0},e.prototype.isEqualTo=function(t){return this.x===t.x&&this.y===t.y},e.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},e.prototype.toArray=function(){return[this.x,this.y]},e.prototype.toObject=function(){return{x:this.x,y:this.y}};var i=180/Math.PI;function a(t,o){return Math.floor(Math.random()*(o-t+1)+t)}function s(t){return t*i}function u(t){return t/i}}(tt)),tt.exports}var Ye=Te();const O=Ne(Ye);var Ie=R('<div id="canvas-box" class="relative inline-block"><canvas width="1700" height="800" class="bg-neutral-100 active:cursor-grabbing"></canvas> <div id="edit-panel" class="absolute right-2.5 top-2.5"><!></div> <!></div>');function Xe(r,n){wt(n,!0);let e,i=new O(0,0),a=1,s=!1,u=new O(0,0),t=new O(0,0),o=nt.nodes,h=nt.links,l=[],_=q(U(o[0])),c=!1,d=q(!1);const v=f=>{f.clearRect(0,0,e.width,e.height),h.forEach(y=>{f.beginPath();const b=o[y.from],M=o[y.to];f.moveTo((b.position[0]-i.x)/a,(b.position[1]-i.y)/a),f.lineTo((M.position[0]-i.x)/a,(M.position[1]-i.y)/a),f.lineWidth=7.5,f.strokeStyle="black",f.stroke()}),o.forEach((y,b)=>{l[b].src=y.image;const M=O.fromArray(y.position).subtract(i).divideScalar(a),H=25/a;f.beginPath(),f.arc(M.x,M.y,20/a,0,Math.PI*2),f.fillStyle="black",f.fill(),f.drawImage(l[b],M.x-H/2,M.y-H/2,H,H)}),requestAnimationFrame(()=>v(f))},N=f=>{const y=e.getBoundingClientRect(),b=(f.clientX-y.left+i.x)/a,M=(f.clientY-y.top+i.y)/a;return new O(b,M)},w=f=>{if(g(d))return;const y=N(f);let b=o.find(M=>O.fromArray(M.position).distance(y)<20);P(_,b??g(_),!0),b?f.button===0?(t=y.clone().subtract(O.fromArray(g(_).position)),c=!0):f.button===2&&P(d,!0):(s=!0,u=y)},p=f=>{if(g(d))return;const y=N(f);if(c){let b=o.find(M=>M.id===g(_).id);if(b===void 0)throw new Error("uhhh focusNode error, it's not in the list...");b.position=y.clone().subtract(t).toArray()}else if(s){const b=y.clone().subtract(u);i.subtract(b)}},m=f=>{g(d)||(c=!1,s=!1)},X=(f,y,b,M)=>window.confirm("Save this node with new contents?")?(o[f].name=y,o[f].description=b,o[f].image=M,!0):!1,Y=(f,y)=>{!f&&y&&!window.confirm("Stop editing without saving?")||P(d,!1)};vt(()=>{e.addEventListener("contextmenu",y=>y.preventDefault());for(const y of o){let b=new Image;b.src=y.image,l.push(b)}let f=e==null?void 0:e.getContext("2d");f!==null&&v(f)});var S=Ie(),A=W(S);A.__mousemove=p,A.__mousedown=w,A.__mouseup=m,G(A,f=>e=f,()=>e);var I=k(A,2),D=W(I);{var x=f=>{Ae(f,{get node_id(){return g(_).id},saveNode:X,exitNode:Y})};Mt(D,f=>{g(d)&&f(x)})}B(I);var T=k(I,2);Se(T),B(S),L(r,S),At()}it(["mousemove","mousedown","mouseup"]);function qe(r){Xe(r,{})}export{qe as component};
