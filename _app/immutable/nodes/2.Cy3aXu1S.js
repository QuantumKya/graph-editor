import"../chunks/CWj6FrbW.js";import"../chunks/DQRv2_04.js";import{d as it,o as ot}from"../chunks/RlHVghCd.js";import{h as S,V as xt,a0 as mt,N as ut,O as lt,Q as Tt,R as et,a3 as Yt,b as It,s as J,a as Xt,A as g,aj as Dt,r as kt,c as zt,d as ft,f as K,j as H,W as Ot,Z as Ct,g as bt,i as wt,p as Pt,av as Z,a1 as At,aw as qt,ar as Lt,ax as ct,ay as Rt,az as Ht,aA as Vt,aB as Bt,aC as Ft,aD as Ut,X as Wt,P as Gt,aE as Jt,aF as Kt,aG as Zt,aH as Qt,aI as jt,aJ as $t,u as te,l as ee,D as at,as as q,ak as U,F as R,J as G,L as k,al as O,K as V,t as L,I as st,G as rt}from"../chunks/BBISlZlx.js";import{b as W,i as Mt}from"../chunks/BhQyqW4B.js";import{b as Et}from"../chunks/Cw35LjHC.js";function re(r){S&&xt(r)!==null&&mt(r)}let dt=!1;function St(){dt||(dt=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var n;if(!r.defaultPrevented)for(const t of r.target.elements)(n=t.__on_r)==null||n.call(t)})},{capture:!0}))}function ne(r){var n=Tt,t=et;ut(null),lt(null);try{return r()}finally{ut(n),lt(t)}}function ie(r,n,t,i=t){r.addEventListener(n,()=>ne(t));const o=r.__on_r;o?r.__on_r=()=>{o(),i(!0)}:r.__on_r=()=>i(!0),St()}function oe(r,n){return n}function ae(r,n,t,i){for(var o=[],s=n.length,u=0;u<s;u++)Ht(n[u].e,o,!0);var e=s>0&&o.length===0&&t!==null;if(e){var a=t.parentNode;mt(a),a.append(t),i.clear(),z(r,n[0].prev,n[s-1].next)}Vt(o,()=>{for(var f=0;f<s;f++){var l=n[f];e||(i.delete(l.k),z(r,l.prev,l.next)),Bt(l.e,!e)}})}function se(r,n,t,i,o,s=null){var u=r,e={flags:n,items:new Map,first:null};{var a=r;u=S?J(xt(a)):a.appendChild(Yt())}S&&Xt();var f=null,l=!1,_=Dt(()=>{var d=t();return Gt(d)?d:d==null?[]:At(d)});It(()=>{var d=g(_),h=d.length;if(l&&h===0)return;l=h===0;let p=!1;if(S){var A=kt(u)===zt;A!==(h===0)&&(u=ft(),J(u),K(!1),p=!0)}if(S){for(var w=null,y,m=0;m<h;m++){if(H.nodeType===Ot&&H.data===Ct){u=H,p=!0,K(!1);break}var X=d[m],Y=i(X,m);y=Nt(H,e,w,null,X,Y,m,o,n,t),e.items.set(Y,y),w=y}h>0&&J(ft())}S||ue(d,e,u,o,n,i,t),s!==null&&(h===0?f?bt(f):f=wt(()=>s(u)):f!==null&&Pt(f,()=>{f=null})),p&&K(!0),g(_)}),S&&(u=H)}function ue(r,n,t,i,o,s,u){var e=r.length,a=n.items,f=n.first,l=f,_,d=null,h=[],p=[],A,w,y,m;for(m=0;m<e;m+=1){if(A=r[m],w=s(A,m),y=a.get(w),y===void 0){var X=l?l.e.nodes_start:t;d=Nt(X,n,d,d===null?n.first:d.next,A,w,m,i,o,u),a.set(w,d),h=[],p=[],l=d.next;continue}if(le(y,A,m),(y.e.f&Z)!==0&&bt(y.e),y!==l){if(_!==void 0&&_.has(y)){if(h.length<p.length){var Y=p[0],N;d=Y.prev;var M=h[0],I=h[h.length-1];for(N=0;N<h.length;N+=1)ht(h[N],Y,t);for(N=0;N<p.length;N+=1)_.delete(p[N]);z(n,M.prev,I.next),z(n,d,M),z(n,I,Y),l=Y,d=I,m-=1,h=[],p=[]}else _.delete(y),ht(y,l,t),z(n,y.prev,y.next),z(n,y,d===null?n.first:d.next),z(n,d,y),d=y;continue}for(h=[],p=[];l!==null&&l.k!==w;)(l.e.f&Z)===0&&(_??(_=new Set)).add(l),p.push(l),l=l.next;if(l===null)continue;y=l}h.push(y),d=y,l=y.next}if(l!==null||_!==void 0){for(var D=_===void 0?[]:At(_);l!==null;)(l.e.f&Z)===0&&D.push(l),l=l.next;var x=D.length;if(x>0){var T=e===0?t:null;ae(n,D,T,a)}}et.first=n.first&&n.first.e,et.last=d&&d.e}function le(r,n,t,i){qt(r.v,n),r.i=t}function Nt(r,n,t,i,o,s,u,e,a,f){var l=(a&Ft)!==0,_=(a&Ut)===0,d=l?_?Lt(o,!1,!1):ct(o):o,h=(a&Rt)===0?u:ct(u),p={i:h,v:d,k:s,a:null,e:null,prev:t,next:i};try{return p.e=wt(()=>e(r,d,h,f),S),p.e.prev=t&&t.e,p.e.next=i&&i.e,t===null?n.first=p:(t.next=p,t.e.next=p.e),i!==null&&(i.prev=p,i.e.prev=p.e),p}finally{}}function ht(r,n,t){for(var i=r.next?r.next.e.nodes_start:t,o=n?n.e.nodes_start:t,s=r.e.nodes_start;s!==i;){var u=Wt(s);o.before(s),s=u}}function z(r,n,t){n===null?r.first=t:(n.next=t,n.e.next=t&&t.e),t!==null&&(t.prev=n,t.e.prev=n&&n.e)}const pt=[...` 	
\r\fÂ \v\uFEFF`];function fe(r,n,t){var i=r==null?"":""+r;if(n&&(i=i?i+" "+n:n),t){for(var o in t)if(t[o])i=i?i+" "+o:o;else if(i.length)for(var s=o.length,u=0;(u=i.indexOf(o,u))>=0;){var e=u+s;(u===0||pt.includes(i[u-1]))&&(e===i.length||pt.includes(i[e]))?i=(u===0?"":i.substring(0,u))+i.substring(e+1):u=e}}return i===""?null:i}function yt(r,n=!1){var t=n?" !important;":";",i="";for(var o in r){var s=r[o];s!=null&&s!==""&&(i+=" "+o+": "+s+t)}return i}function ce(r,n){if(n){var t="",i,o;return Array.isArray(n)?(i=n[0],o=n[1]):i=n,i&&(t+=yt(i)),o&&(t+=yt(o,!0)),t=t.trim(),t===""?null:t}return String(r)}function P(r,n,t,i,o,s){var u=r.__className;if(S||u!==t||u===void 0){var e=fe(t,i,s);(!S||e!==r.getAttribute("class"))&&(e==null?r.removeAttribute("class"):r.className=e),r.__className=t}else if(s&&o!==s)for(var a in s){var f=!!s[a];(o==null||f!==!!o[a])&&r.classList.toggle(a,f)}return s}function Q(r,n={},t,i){for(var o in t){var s=t[o];n[o]!==s&&(t[o]==null?r.style.removeProperty(o):r.style.setProperty(o,s,i))}}function de(r,n,t,i){var o=r.__style;if(S||o!==n){var s=ce(n,i);(!S||s!==r.getAttribute("style"))&&(s==null?r.removeAttribute("style"):r.style.cssText=s),r.__style=n}else i&&(Array.isArray(i)?(Q(r,t==null?void 0:t[0],i[0]),Q(r,t==null?void 0:t[1],i[1],"important")):Q(r,t,i));return i}const he=Symbol("is custom element"),pe=Symbol("is html");function ye(r){if(S){var n=!1,t=()=>{if(!n){if(n=!0,r.hasAttribute("value")){var i=r.value;B(r,"value",null),r.value=i}if(r.hasAttribute("checked")){var o=r.checked;B(r,"checked",null),r.checked=o}}};r.__on_r=t,Zt(t),St()}}function B(r,n,t,i){var o=ve(r);S&&(o[n]=r.getAttribute(n),n==="src"||n==="srcset"||n==="href"&&r.nodeName==="LINK")||o[n]!==(o[n]=t)&&(n==="loading"&&(r[Qt]=t),t==null?r.removeAttribute(n):typeof t!="string"&&ge(r).includes(n)?r[n]=t:r.setAttribute(n,t))}function ve(r){return r.__attributes??(r.__attributes={[he]:r.nodeName.includes("-"),[pe]:r.namespaceURI===Jt})}var vt=new Map;function ge(r){var n=vt.get(r.nodeName);if(n)return n;vt.set(r.nodeName,n=[]);for(var t,i=r,o=Element.prototype;o!==i;){t=jt(i);for(var s in t)t[s].set&&n.push(s);i=Kt(i)}return n}function gt(r,n,t=n){var i=$t();ie(r,"input",o=>{var s=o?r.defaultValue:r.value;if(s=j(r)?$(s):s,t(s),i&&s!==(s=n())){var u=r.selectionStart,e=r.selectionEnd;r.value=s??"",e!==null&&(r.selectionStart=u,r.selectionEnd=Math.min(e,r.value.length))}}),(S&&r.defaultValue!==r.value||te(n)==null&&r.value)&&t(j(r)?$(r.value):r.value),ee(()=>{var o=n();j(r)&&o===$(r.value)||r.type==="date"&&!o&&!r.value||o!==r.value&&(r.value=o??"")})}function j(r){var n=r.type;return n==="number"||n==="range"}function $(r){return r===""?null:+r}const _e=[{id:0,name:"Addition",description:"",image:"",position:[100,100]},{id:1,name:"Subtraction",description:"",image:"",position:[300,150]},{id:2,name:"Multiplication",description:"",image:"",position:[200,300]},{id:3,name:"Division",description:"",image:"",position:[300,450]}],xe=[{from:0,to:1},{from:0,to:2},{from:2,to:3}],nt={nodes:_e,links:xe};var me=R('<img alt="Uploaded Icon" class="rounded-lg w-[300px]"/>'),be=R('<img alt="Uploaded Icon" class="rounded-lg w-[300px]"/>'),we=R('<div class="flex flex-col gap-3.5 max-w-[350px] h-fit bg-neutral-950 text-white p-2.5 rounded-xl"><input type="text" placeholder="Node Title"/> <button>Upload Image</button> <input type="file" accept="image/*"/> <!> <textarea rows="6" maxlength="400" placeholder="Node Description"></textarea> <button>Save</button> <button>Exit</button></div>');function Ae(r,n){at(n,!0);const i=nt.nodes[n.node_id];let o=q(U(i.name)),s=q(U(i.description)),u=q(U(i.image)),e,a,f,l=!1,_=!1;ot(()=>{a.value=i.name,f.value=i.description});const d=()=>{l=!0},h="bg-neutral-800 text-white border-blue-500 text-center rounded-xl border-2 w-fit p-2 pt-1 transition duration-200 hover:bg-gray-700",p="font-mono text-lg bg-neutral-800 text-white rounded-xl p-2 pl-3 transition duration-300 focus:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none";var A=we(),w=G(A);ye(w),P(w,1,p),w.__change=d,W(w,x=>a=x,()=>a);var y=k(w,2);P(y,1,h),y.__click=x=>{e.click()};var m=k(y,2);m.__change=x=>{const T=x.target;if(!T.files||T.files.length===0)return;const c=T.files[0],v=new FileReader;v.onload=()=>{typeof v.result=="string"&&O(u,v.result,!0)},v.readAsDataURL(c),d()},de(m,"",{},{display:"none"}),W(m,x=>e=x,()=>e);var X=k(m,2);{var Y=x=>{var T=me();rt(()=>B(T,"src",g(u))),L(x,T)},N=x=>{var T=be();rt(()=>B(T,"src",`${Et??""}/landscape-placeholder.svg`)),L(x,T)};Mt(X,x=>{g(u)!=""?x(Y):x(N,!1)})}var M=k(X,2);re(M),P(M,1,"font-mono text-lg bg-neutral-800 text-white rounded-xl p-2 pl-3 transition duration-300 focus:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none placeholder:text-neutral-400 resize-none overflow-scroll"),M.__change=d,W(M,x=>f=x,()=>f);var I=k(M,2);P(I,1,h),I.__click=()=>{_=n.saveNode(n.node_id,g(o),g(s),g(u))};var D=k(I,2);P(D,1,h),D.__click=()=>n.exitNode(_,l),V(A),gt(w,()=>g(o),x=>O(o,x)),gt(M,()=>g(s),x=>O(s,x)),L(r,A),st()}it(["change","click"]);var Me=R('<button><img alt=""/></button>'),Ee=R('<div class="flex absolute rounded-xl bg-neutral-200 border-blue-300 border-2 p-[15px] pt-[5px] pb-[5px] h-fit bottom-6 left-[50%] transform -translate-[50%]"></div>');function Se(r,n){at(n,!0);let t=q(0),i=["add","edit","drag","link"],o=["node_add.png","node_edit.png","node_drag.png","link.png"],s=q(0);ot(()=>{O(s,window.innerWidth,!0)});var u=Ee();se(u,21,()=>i,oe,(e,a,f)=>{var l=Me();let _;l.__click=p=>O(t,f,!0);var d=G(l);let h;V(l),rt((p,A)=>{_=P(l,1,`p-2.5 rounded-xl border-none outline-none transition duration-200 hover:bg-blue-300 ${g(t)===f?"bg-gray-500":""}`,null,_,p),B(d,"src",`${Et??""}/mode_icons/${o[f]??""}`),h=P(d,1,"",null,h,A)},[()=>({"mt-[10px]":g(t)!==f,"mb-[10px]":g(t)!==f,"mt-auto":g(t)===f,"mb-auto":g(t)===f}),()=>({"max-w-[40px]":g(t)===f,"max-w-[30px]":g(t)!==f,"rounded-xl":g(t)===f,"rounded-lg":g(t)!==f})]),L(e,l)}),V(u),L(r,u),st()}it(["click"]);function Ne(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var tt={exports:{}},_t;function Te(){return _t||(_t=1,function(r,n){r.exports=t;function t(e,a){if(!(this instanceof t))return new t(e,a);this.x=e||0,this.y=a||0}t.fromArray=function(e){return new t(e[0]||0,e[1]||0)},t.fromObject=function(e){return new t(e.x||0,e.y||0)},t.prototype.addX=function(e){return this.x+=e.x,this},t.prototype.addY=function(e){return this.y+=e.y,this},t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.addScalar=function(e){return this.x+=e,this.y+=e,this},t.prototype.addScalarX=function(e){return this.x+=e,this},t.prototype.addScalarY=function(e){return this.y+=e,this},t.prototype.subtractX=function(e){return this.x-=e.x,this},t.prototype.subtractY=function(e){return this.y-=e.y,this},t.prototype.subtract=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.subtractScalar=function(e){return this.x-=e,this.y-=e,this},t.prototype.subtractScalarX=function(e){return this.x-=e,this},t.prototype.subtractScalarY=function(e){return this.y-=e,this},t.prototype.divideX=function(e){return this.x/=e.x,this},t.prototype.divideY=function(e){return this.y/=e.y,this},t.prototype.divide=function(e){return this.x/=e.x,this.y/=e.y,this},t.prototype.divideScalar=function(e){return e!==0?(this.x/=e,this.y/=e):(this.x=0,this.y=0),this},t.prototype.divideScalarX=function(e){return e!==0?this.x/=e:this.x=0,this},t.prototype.divideScalarY=function(e){return e!==0?this.y/=e:this.y=0,this},t.prototype.invertX=function(){return this.x*=-1,this},t.prototype.invertY=function(){return this.y*=-1,this},t.prototype.invert=function(){return this.invertX(),this.invertY(),this},t.prototype.multiplyX=function(e){return this.x*=e.x,this},t.prototype.multiplyY=function(e){return this.y*=e.y,this},t.prototype.multiply=function(e){return this.x*=e.x,this.y*=e.y,this},t.prototype.multiplyScalar=function(e){return this.x*=e,this.y*=e,this},t.prototype.multiplyScalarX=function(e){return this.x*=e,this},t.prototype.multiplyScalarY=function(e){return this.y*=e,this},t.prototype.normalize=function(){var e=this.length();return e===0?(this.x=1,this.y=0):this.divide(t(e,e)),this},t.prototype.norm=t.prototype.normalize,t.prototype.limit=function(e,a){return Math.abs(this.x)>e&&(this.x*=a),Math.abs(this.y)>e&&(this.y*=a),this},t.prototype.randomize=function(e,a){return this.randomizeX(e,a),this.randomizeY(e,a),this},t.prototype.randomizeX=function(e,a){var f=Math.min(e.x,a.x),l=Math.max(e.x,a.x);return this.x=o(f,l),this},t.prototype.randomizeY=function(e,a){var f=Math.min(e.y,a.y),l=Math.max(e.y,a.y);return this.y=o(f,l),this},t.prototype.randomizeAny=function(e,a){return Math.round(Math.random())?this.randomizeX(e,a):this.randomizeY(e,a),this},t.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.prototype.toFixed=function(e){return typeof e>"u"&&(e=8),this.x=this.x.toFixed(e),this.y=this.y.toFixed(e),this},t.prototype.mixX=function(e,a){return typeof a>"u"&&(a=.5),this.x=(1-a)*this.x+a*e.x,this},t.prototype.mixY=function(e,a){return typeof a>"u"&&(a=.5),this.y=(1-a)*this.y+a*e.y,this},t.prototype.mix=function(e,a){return this.mixX(e,a),this.mixY(e,a),this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyX=function(e){return this.x=e.x,this},t.prototype.copyY=function(e){return this.y=e.y,this},t.prototype.copy=function(e){return this.copyX(e),this.copyY(e),this},t.prototype.zero=function(){return this.x=this.y=0,this},t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.cross=function(e){return this.x*e.y-this.y*e.x},t.prototype.projectOnto=function(e){var a=(this.x*e.x+this.y*e.y)/(e.x*e.x+e.y*e.y);return this.x=a*e.x,this.y=a*e.y,this},t.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},t.prototype.horizontalAngleDeg=function(){return s(this.horizontalAngle())},t.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},t.prototype.verticalAngleDeg=function(){return s(this.verticalAngle())},t.prototype.angle=t.prototype.horizontalAngle,t.prototype.angleDeg=t.prototype.horizontalAngleDeg,t.prototype.direction=t.prototype.horizontalAngle,t.prototype.rotate=function(e){var a=this.x*Math.cos(e)-this.y*Math.sin(e),f=this.x*Math.sin(e)+this.y*Math.cos(e);return this.x=a,this.y=f,this},t.prototype.rotateDeg=function(e){return e=u(e),this.rotate(e)},t.prototype.rotateTo=function(e){return this.rotate(e-this.angle())},t.prototype.rotateToDeg=function(e){return e=u(e),this.rotateTo(e)},t.prototype.rotateBy=function(e){var a=this.angle()+e;return this.rotate(a)},t.prototype.rotateByDeg=function(e){return e=u(e),this.rotateBy(e)},t.prototype.distanceX=function(e){return this.x-e.x},t.prototype.absDistanceX=function(e){return Math.abs(this.distanceX(e))},t.prototype.distanceY=function(e){return this.y-e.y},t.prototype.absDistanceY=function(e){return Math.abs(this.distanceY(e))},t.prototype.distance=function(e){return Math.sqrt(this.distanceSq(e))},t.prototype.distanceSq=function(e){var a=this.distanceX(e),f=this.distanceY(e);return a*a+f*f},t.prototype.length=function(){return Math.sqrt(this.lengthSq())},t.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},t.prototype.magnitude=t.prototype.length,t.prototype.isZero=function(){return this.x===0&&this.y===0},t.prototype.isEqualTo=function(e){return this.x===e.x&&this.y===e.y},t.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},t.prototype.toArray=function(){return[this.x,this.y]},t.prototype.toObject=function(){return{x:this.x,y:this.y}};var i=180/Math.PI;function o(e,a){return Math.floor(Math.random()*(a-e+1)+e)}function s(e){return e*i}function u(e){return e/i}}(tt)),tt.exports}var Ye=Te();const C=Ne(Ye);var Ie=R('<div id="canvas-box" class="relative inline-block overflow-hidden"><canvas class="bg-neutral-100 active:cursor-grabbing"></canvas> <div id="edit-panel" class="absolute right-2.5 top-2.5"><!></div> <!></div>');function Xe(r,n){at(n,!0);let t,i=new C(0,0),o=1,s=!1,u=new C(0,0),e=new C(0,0),a=nt.nodes,f=nt.links,l=[],_=q(U(a[0])),d=!1,h=q(!1);const p=c=>{t.width=window.innerWidth,t.height=window.innerHeight,c.clearRect(0,0,t.width,t.height),f.forEach(v=>{c.beginPath();const b=a[v.from],E=a[v.to];c.moveTo((b.position[0]-i.x)/o,(b.position[1]-i.y)/o),c.lineTo((E.position[0]-i.x)/o,(E.position[1]-i.y)/o),c.lineWidth=7.5,c.strokeStyle="black",c.stroke()}),a.forEach((v,b)=>{l[b].src=v.image;const E=C.fromArray(v.position).subtract(i).divideScalar(o),F=25/o;c.beginPath(),c.arc(E.x,E.y,20/o,0,Math.PI*2),c.fillStyle="black",c.fill(),c.drawImage(l[b],E.x-F/2,E.y-F/2,F,F)}),requestAnimationFrame(()=>p(c))},A=c=>{const v=t.getBoundingClientRect(),b=(c.clientX-v.left+i.x)/o,E=(c.clientY-v.top+i.y)/o;return new C(b,E)},w=c=>{if(g(h))return;const v=A(c);let b=a.find(E=>C.fromArray(E.position).distance(v)<20);O(_,b??g(_),!0),b?c.button===0?(e=v.clone().subtract(C.fromArray(g(_).position)),d=!0):c.button===2&&O(h,!0):(s=!0,u=v)},y=c=>{if(g(h))return;const v=A(c);if(d){let b=a.find(E=>E.id===g(_).id);if(b===void 0)throw new Error("uhhh focusNode error, it's not in the list...");b.position=v.clone().subtract(e).toArray()}else if(s){const b=v.clone().subtract(u);i.subtract(b)}},m=c=>{g(h)||(d=!1,s=!1)},X=(c,v,b,E)=>window.confirm("Save this node with new contents?")?(a[c].name=v,a[c].description=b,a[c].image=E,!0):!1,Y=(c,v)=>{!c&&v&&!window.confirm("Stop editing without saving?")||O(h,!1)};ot(()=>{t.addEventListener("contextmenu",v=>v.preventDefault());for(const v of a){let b=new Image;b.src=v.image,l.push(b)}let c=t==null?void 0:t.getContext("2d");c!==null&&p(c)});var N=Ie(),M=G(N);M.__mousemove=y,M.__mousedown=w,M.__mouseup=m,W(M,c=>t=c,()=>t);var I=k(M,2),D=G(I);{var x=c=>{Ae(c,{get node_id(){return g(_).id},saveNode:X,exitNode:Y})};Mt(D,c=>{g(h)&&c(x)})}V(I);var T=k(I,2);Se(T,{}),V(N),L(r,N),st()}it(["mousemove","mousedown","mouseup"]);function qe(r){Xe(r,{})}export{qe as component};
